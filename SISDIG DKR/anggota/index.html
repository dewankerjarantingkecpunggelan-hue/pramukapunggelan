<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Anggota DKR â€¢ SISDIG</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

<style>
:root{
  --primary:#2563eb;
  --primary-soft:#eff6ff;
  --bg:#f8fafc;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* ===== HEADER ===== */
/* ===== HEADER MODERN (CENTER) ===== */
.header{
  background:linear-gradient(135deg,#4f46e5,#2563eb);
  border-radius:0 0 24px 24px;
  padding:16px 20px 28px;
  color:#fff;
  box-shadow:0 6px 24px rgba(0,0,0,.12);
}

.header-inner{
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
}

.header-title{
  font-size:18px;
  font-weight:600;
  text-align:center;
}

/* tombol beranda posisi kiri tapi judul tetap center */
.home-btn{
  position:absolute;
  left:0;
  background:rgba(255,255,255,.2);
  color:#fff;
  border:none;
  padding:8px 14px;
  border-radius:12px;
  font-size:13px;
  font-weight:500;
  cursor:pointer;
}

.home-btn:hover{
  background:rgba(255,255,255,.3);
}

/* ===== CONTENT ===== */
.container{
  max-width:1100px;
  margin:auto;
  padding:18px;
  padding-bottom:200px;
}
.card{
  background:var(--card);
  border-radius:14px;
  padding:14px 16px;
  display:flex;
  align-items:center;
  gap:14px;
  margin-bottom:12px;
  border:1px solid #e5e7eb;
  transition:.15s;
}
.card:hover{
  background:var(--primary-soft);
}
.avatar{
  width:56px;
  height:56px;
  border-radius:50%;
  object-fit:cover;
  background:#e5e7eb;
}
.info{flex:1}
.name{
  font-weight:600;
  font-size:14px;
}
.role{
  font-size:12px;
  color:var(--muted);
}

/* ===== BADGE ADMIN ===== */
.badge-admin{
  display:inline-block;
  margin-top:4px;
  padding:3px 10px;
  font-size:10px;
  font-weight:600;
  letter-spacing:.4px;
  color:#1e40af;
  background:#dbeafe;
  border-radius:999px;
}

/* ===== CHAT BUTTON ===== */
.chat-btn{
  background:#e0e7ff;
  color:#1e40af;
  border:none;
  border-radius:10px;
  width:40px;
  height:40px;
  font-size:20px;
  cursor:pointer;
}
.chat-btn:hover{
  background:#c7d2fe;
}

/* ===== FOOTER VISUAL ===== */
.footer{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:160px;
  background:linear-gradient(to top,#e0e7ff,#f8fafc);
}
.footer svg{
  width:100%;
  height:100%;
}

/* ===== FOOTER HOME BUTTON (PRAMUKA STYLE) ===== */
.footer-home{
  position:absolute;
  left:50%;
  bottom:32px;
  transform:translateX(-50%);
  z-index:20;
}

.footer-home button{
  background:linear-gradient(135deg,#92400e,#f59e0b);
  color:#fff;
  border:none;
  padding:10px 18px;
  border-radius:999px;
  font-family:Poppins,sans-serif;
  font-size:13px;
  font-weight:600;
  display:flex;
  align-items:center;
  gap:8px;
  cursor:pointer;
  box-shadow:0 8px 20px rgba(0,0,0,.35);
  border:2px solid rgba(255,255,255,.6);
}

.footer-home button:hover{
  transform:translateY(-2px) scale(1.03);
  box-shadow:0 12px 26px rgba(0,0,0,.45);
}

.footer-home i{
  font-size:18px;
}

</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="header-inner">
    <div class="header-title">Anggota DKR Punggelan</div>
  </div>
</div>


<!-- CONTENT -->
<div class="container">
  <div id="list"></div>
</div>

<!-- FOOTER -->
<div class="footer">
  <svg viewBox="0 0 1000 200" preserveAspectRatio="none">
    <!-- tanah -->
    <rect y="120" width="1000" height="80" fill="#c7d2fe"/>

    <!-- pohon -->
    <g fill="#93c5fd">
      <polygon points="90,120 130,70 170,120"/>
      <rect x="120" y="120" width="20" height="40" fill="#94a3b8"/>
      <polygon points="830,120 870,70 910,120"/>
      <rect x="860" y="120" width="20" height="40" fill="#94a3b8"/>
    </g>

    <!-- tenda -->
    <polygon points="430,120 500,50 570,120" fill="#2563eb"/>
  </svg>

  <!-- TOMBOL BERANDA PRAMUKA -->
  <div class="footer-home">
    <button onclick="location.href='../index.html'">
      <i class='bx bx-home-heart'></i>
      Wangsul
    </button>
  </div>
</div>

<script>
if(sessionStorage.getItem("SISDIG_AUTH")!=="OK"){
  location.href="../login.html";
}

function loadAnggota(){
  const old=document.getElementById("jsonpAnggota");
  if(old) old.remove();

  const s=document.createElement("script");
  s.id="jsonpAnggota";
  s.src="https://script.google.com/macros/s/AKfycbwa0pctleYIZoHCLaIcZkcm-vim52oXv98J0Pj738zzE_FbnmO55XNiKGeAbh5-A7Qg/exec?callback=renderAnggota";
  document.body.appendChild(s);
}

function renderAnggota(data){
  const box=document.getElementById("list");
  box.innerHTML="";

  data.forEach(u=>{
    const foto=(u.foto && u.foto.startsWith("data:image"))
      ? u.foto
      : "../akun/default.png";

    const isAdmin = u.role === "admin_dev";

    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      <img class="avatar" src="${foto}">
      <div class="info">
        <div class="name">${u.nama_lengkap||u.username}</div>
        <div class="role">${u.jabatan||"-"}</div>
        ${isAdmin ? `<span class="badge-admin">ADMIN ASOLOLE</span>` : ``}
      </div>
      <button class="chat-btn" onclick="openChat('${u.username}')">
        <i class='bx bx-chat'></i>
      </button>
    `;
    box.appendChild(div);
  });
}

function openChat(username){
  sessionStorage.setItem("ETANOL_AUTO_OPEN",username.toLowerCase());
  window.location.href="../messages/index.html";
}

loadAnggota();
</script>

</body>
</html>
