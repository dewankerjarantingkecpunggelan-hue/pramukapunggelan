<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">

<script>
const params = new URLSearchParams(location.search);
const id = params.get("id");

if(!id){
  document.write("<title>Artikel</title>");
}else{
  fetch("https://script.google.com/macros/s/AKfycbxLlwFoX5OfJKMeob_jDyb0lzMcb5rbUm0_QUhMbC38HAg8xD5fmC0yymf15-SQ1s8e/exec?action=detail&id="+id)
  .then(r=>r.json())
  .then(a=>{

    document.write(`
<title>${a.judul}</title>

<meta property="og:title" content="${a.judul}">
<meta property="og:description" content="${a.isi.substring(0,140)}">
<meta property="og:image" content="${a.thumbnail}">
<meta property="og:url" content="${location.href}">
<meta property="og:type" content="article">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="${a.judul}">
<meta name="twitter:description" content="${a.isi.substring(0,140)}">
<meta name="twitter:image" content="${a.thumbnail}">
`);

    // redirect ke halaman artikel asli
    setTimeout(()=>{
      location.href="/warta?id="+id;
    }, 300);

  });
}
</script>

</head>
<body></body>
</html>
